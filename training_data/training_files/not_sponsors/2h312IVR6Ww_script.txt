some time ago i was browsing youtube and discovered this old commercial and needless to say i wanted to build one but their version was way too big so i immediately began exploring how i could miniaturize this technology to bring it to tabletop size and about a year later i had this the basic operating principle is not too complex a miniature solenoid valve would open and close very quickly to release a single drop of water at a time do this a few times with precise timing between drops then flash a light to reveal where each drop is mid-fall and if you repeat this over and over again you can create animations from these frozen drops from here it's really easy to add more valves for a 2d display and then even more for a 3d display but here's the tricky part i'd like to fit at least six drops vertically in the 250 millimeter tall display area some quick math reveals that my valve timing needs to hit somewhere around 20 to 25 milliseconds between drops which is incredibly fast this is not going to be easy but you know it is easy joining datacamp my sponsor for this video datacamp is an online learning platform that makes acquiring data skills easier and more convenient than ever whether you're beginner or pro datacamp has over 350 data science courses designed by top experts to help you develop new skills so you can stand out professionally i've always found machine learning algorithms incredibly fascinating but up until now i've had a vague understanding of them at best since taking data cam's supervised learning course in python i finally feel like i have a grasp on the subject and i'm so excited to use what i've learned in future videos and i also really enjoyed the gamified aspect which encourages learning by rewarding you with experience points and levels upon completing lessons and even if you don't know where to start datacamp offers free assessments to personalize your learning recommendations whether you want to learn something new to get an edge for a new job or promotion or you just want to brush up on some old skills datacamp can help get you there use my link in the description and get access to the first chapter of any course 100 for free now back to the video last year i started running my first test this was my first semi-successful one i used to water bottles of reservoir and these little lure lock needles to test a few different nozzle sizes apologies for the poor footage quality but after no joke hundreds of tests run over a six month period and with the help of some crazy high-speed video capabilities of my cell phone i discovered a few very critical design constraints among the most important one don't use solenoids rated for air only believe it or not they aren't lying in the description if you put water through them they'll rust and seize it very quickly two too much back pressure like if the reservoir is too high up actually causes more problems than it can help and three a straight 14 gauge needle produces the optimal water drops for my application fast forward a few more months and i started building the frame of this device i used some leftover extrusions from previous projects and was able to bolt it all together surprisingly quick from here i added my water tank and a platform for my solenoid to sit on and then the fun really began up until now i'd been using mostly unmodified solenoid valves i attached the inlet to my water tank and the outlet to a 3d printed lure adapter but if i'm going to eventually be making 64 of these valves i wanted a cleaner simpler smarter solution i'd take apart one of the valves and discovered that it would actually be really easy to 3d print my own using my resin 3d printer [Music] this would allow me to relocate the inlet to allow tighter packing of the array of valves as well as directly integrate the lure adapter into the output rather than needing some tubing to connect them yeah this is definitely not going to take dozens of iterations and so i printed my first design but upon testing it i found that it was really really leaky it turned out to be the lure lock not sealing very well which was partially due to the print orientation and where i had placed supports and partially due to the design i could have tweaked it a bit but i had a different idea forget the needles resin printers are accurate enough to be able to just print the output nozzle itself directly or so i thought so out with the lure adapter and in with the printed nozzle and no more leaks after that successful testing i printed seven more i also printed this simple distribution block so i can get water to all the valves the solenoids were then primed using a very satisfying waterfall type effect and it was ready to test it quickly became apparent that this distribution block was causing a lot of issues there just wasn't enough water pressure in the system so i scrapped that idea and i instead just connected all the solenoids directly to the water tank this solution worked far better but i was still having issues with inconsistent dispensing time for the next version this design was a huge step forward it incorporates two solenoids into a single printed head plus it added some holes for mounting and there is optimization of the internal geometry unfortunately yeah it leaked like crazy i believe the issue here was due to my print settings or how exactly i just set up this print job but i wanted to make some design changes anyway so i never really confirmed this theory next i went back to a single solenoid design to allow tighter and more uniform solenoid packing this is also where i started to investigate how setting up the print file affected performance i printed this attempt at a 15 degree angle with 20 micron layers and the following at a 30 degree angle with 40 micron layers the ladder performed a bit better but it was still pretty inconsistent and a little leaky oh and one of the vowels cracked during assembly yeah but i want to run a more conclusive test so next up i did something smart i started adding text to the parts this might only help me keep track of changes but it would also allow me to more easily test multiple changes at once this next run had two different sized orifices internally and two different print orientations for a total of four configuration unfortunately each pair had one pretty leaky and one good performing valve so this was quite possibly the least conclusive test i have ever run at least that's what i thought at first but when i started comparing performance when actually dispensing drops i noticed something critical the solenoids that had the slow leaks actually performed slightly better than the non-leaky ones this was the total opposite of what i expected to see my thought up until now was that a rapid and good sealing valve would be needed to provide a very definitive kick so that each drop would be ejected but this new evidence makes me rethink things i'm pretty sure i gotta add some spring to the system not a metal spring but an air spring as you probably know water is an incompressible fluid this means that when i shut my valve if it seals well the water has absolutely nowhere to go the reason the leaky valves may have worked better was because they allowed the water in the nozzle to advance slightly after shutting that valve this allows the water to extend a bit past the opening of the nozzle and release a drop but having valves that slowly leak all the time is not ideal so i had to come up with a new design to proceed i saw two options one was to add a rough cut to the bottom of the nozzle this would allow any water below that highest point of the cut to use its inertia and break free of the nozzle itself for two add an internal air chamber this internal air chamber should add some spring to the system and hopefully will have a similar effect to the notched nozzle so i went ahead and i printed both of these designs plus a third that included both of these changes and the results speak for themselves these valves leaked way less and were far more consistent creating drops though still not perfect i found the rough cut nozzle was very difficult to print without breaking so the internal air chamber was the winner here from there i made a few more iterations to the size and location of the air chamber to optimize performance and then i was ready i installed it the latest version filled up the new larger water tank and primed each nozzle it was time to get testing it did not take me long to realize that i was gonna need some more tuning to make this actually look nice turns out 3d printing is nowhere near as consistent as injection molding but luckily this is all stuff that i can fix in software some quick high speed video analysis revealed that the main difference between the performance of the valves was the release velocity of the drops i added a compensation to the valve timing algorithm to allow customizable release velocities for each valve and now everything worked way better now it's time to take things to the next level by taking apart a highlighter and adding its encore to a bottle of water you can very easily make some cheap and crazy concentrated uv fluid yeah you definitely do not want to spill this anywhere or any room is going to look like a scene from squid game i installed some uv leds along the front parts of the frame these will illuminate the display area and after uploading my latest code [Music] [Music] this is looking amazing you may be wondering how exactly i'm controlling these eight valves well i'll prepare for disappointment that's right i'm using a breadboard but for good reason i already had tons of these transistors and featherboards laying around and the circuit is really simple but the other reason that i didn't design a custom pcb for this project is that i'm designing a new mini project called the mub this is a super tiny board that's going to be the core of pretty much every new pcb i make in the future so until this little mini board is ready i don't want to waste any of my few remaining microcontrollers on random projects like this and with all that let's see just what this thing can do [Music] most of these routines were designed programmatically though i could do it by hand if i really wanted to each frame is a line of a csv file this line contains the valve index and then the height in millimeters of each water drop for that frame and valve the csv file is then red line by line by a python script and sent over cereal to the feather the feather will then actually use the kinematic equations plus all those calibrations and corrections i mentioned above to determine exactly which time each solenoid should open and close and finally once all the solenoids have opened and closed for this frame the uv leds will flash to reveal each drop mid freefall my code is not optimal so i can currently only handle about 3 frames per second but i think with some careful serial buffering and the less discrete handling of frames i could probably get up to four or maybe even five frames per second though the slow frame rate really isn't that bothersome well that is until you try to do multiple drops per valve that's when the issues start to arise this routine is supposed to say hi and it gets pretty close but not quite and this one is supposed to be a smiley face which is a lot further off but there's still a lot of cool animations i can do with just one to do drops per column so it's not a total loss by any means the next step this project is going to be a big one i think i'm going to move back to the needle style dispensers as those were way more consistent than 3d printing the nozzle itself then i'm definitely going to need a custom control board since i'm gonna go 3d and i'm going to have 64 valves to control and finally i might get a little fancy and develop an automatic calibration routine that would use feedback from a webcam to automatically calibrate each nozzle individually but hopefully i don't need to go that far and anyway that's a future me problem so thank you all for watching if you enjoyed this video please subscribe and hit that like button to show your support a huge thank you as always to all my patreons if you'd like to help support my channel the link is down below until next time 